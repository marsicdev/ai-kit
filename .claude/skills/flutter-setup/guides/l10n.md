# Localization (l10n) Setup

Avoid hardcoded strings in your UI code. Use Flutter's native internationalization support (`gen_l10n`) to manage text resources.

## Dependencies

Add to `pubspec.yaml`:

```yaml
dependencies:
  flutter:
    sdk: flutter
  flutter_localizations:
    sdk: flutter
  intl: any

flutter:
  generate: true # Enable code generation
```

## Configuration

1. Create `l10n.yaml` in the project root:

```yaml
arb-dir: lib/l10n
template-arb-file: app_en.arb
output-localization-file: app_localizations.dart
```

2. Create your first ARB file at `lib/l10n/app_en.arb`:

```json
{
  "@@locale": "en",
  "appTitle": "My App",
  "welcomeMessage": "Welcome back, {userName}!",
  "@welcomeMessage": {
    "placeholders": {
      "userName": {
        "type": "String"
      }
    }
  },
  "itemsCount": "{count, plural, =0{No items} =1{1 item} other{{count} items}}",
  "@itemsCount": {
    "placeholders": {
      "count": {
        "type": "int"
      }
    }
  }
}
```

## Implementation

### 1. Add Helper Extension

Create `lib/src/localization/app_localizations_provider.dart` (or similar utility file) for easier access:

```dart
import 'package:flutter/widgets.dart';
import 'package:flutter_gen/gen_l10n/app_localizations.dart';

export 'package:flutter_gen/gen_l10n/app_localizations.dart';

extension AppLocalizationsX on BuildContext {
  AppLocalizations get l10n => AppLocalizations.of(this)!;
}
```

### 2. Configure MaterialApp

```dart
// lib/main.dart
import 'package:flutter_localizations/flutter_localizations.dart';
import 'package:flutter_gen/gen_l10n/app_localizations.dart';

MaterialApp(
  title: 'My App', // Note: For title, you might need onGenerateTitle
  onGenerateTitle: (context) => AppLocalizations.of(context)!.appTitle,
  localizationsDelegates: const [
    AppLocalizations.delegate,
    GlobalMaterialLocalizations.delegate,
    GlobalWidgetsLocalizations.delegate,
    GlobalCupertinoLocalizations.delegate,
  ],
  supportedLocales: AppLocalizations.supportedLocales,
  home: const HomeScreen(),
);
```

## Usage

### Do

```dart
// Use the extension for clean access
Text(context.l10n.welcomeMessage('Alice'))

// Plurals handling
Text(context.l10n.itemsCount(5))
```

### Don't

```dart
// Hardcoded strings
Text('Welcome back, Alice!')

// Manual plural logic
Text(count == 1 ? '1 item' : '$count items')
```

## Why

- **Separation of Concerns:** Keeps text content separate from UI logic.
- **Maintainability:** Easier to update text without touching code.
- **Scalability:** Ready for new languages from day one.
- **Features:** Built-in support for pluralization, gender, and date/number formatting.
