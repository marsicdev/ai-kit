---
name: commit
description: Auto-stage all files and create a meaningful commit message with ticket formatting
allowed-tools: Bash
---

Automatically stage all files and create a meaningful commit message with proper ticket formatting.

## Steps

1. Stage all changes:
   ```bash
   git add .
   ```

2. Get the current branch name to extract ticket number:
   ```bash
   git branch --show-current
   ```

3. Get the staged changes to understand what was modified:
   ```bash
   git diff --cached --name-status
   git diff --cached --stat
   ```

4. Analyze the staged changes and create a commit message following these rules:
   - Extract ticket number from branch name (e.g., TEC-16401, PROJ-123, etc.)
   - If branch contains pattern like `PREFIX-NNNNN`, start commit message with the ticket number
   - Format: `PREFIX-NNNNN: [descriptive message]`
   - If no ticket pattern found, use a clear descriptive message without prefix
   - Keep message 1-2 sentences max
   - Use present tense, imperative mood (e.g., "Add", "Fix", "Update", "Refactor")

5. Create the commit:
   ```bash
   git commit -m "[generated message]"
   ```

   **Important**: NEVER include any AI attribution or indication that the commit was generated by AI, such as:
   - "Generated with Claude Code"
   - "Co-Authored-By: Claude" or similar
   - Any other AI attribution, signature, or co-author tags

## Branch Name Patterns to Extract

- `feature/TEC-16401-lp-ui-v2-a11y` -> `TEC-16401:`
- `bugfix/PROJ-283-fix-login` -> `PROJ-283:`
- `hotfix/APP-12345-critical-fix` -> `APP-12345:`
- Any pattern with `[A-Z]+-\d+` (uppercase prefix, dash, numbers)

## Examples

- Branch: `feature/TEC-16401-lp-ui-v2-a11y`
  Changes: Updated button components and added accessibility attributes
  Commit: `TEC-16401: Add accessibility attributes to button components`

- Branch: `main`
  Changes: Fixed null pointer exception in user service
  Commit: `Fix null pointer exception in user service`
